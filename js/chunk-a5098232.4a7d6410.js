(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5098232"],{"202c":function(e,s,a){"use strict";a("c25e")},"3d5f":function(e,s,a){"use strict";a("bee2")},"4ef5":function(e,s,a){"use strict";a.r(s);var t=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"setting-container"},[a("NavBar"),a("TweetModal"),a("div",{staticClass:"main"},[a("UserSetting",{attrs:{"initial-user":e.currentUser}})],1)],1)},r=[],n=a("5530"),i=a("d000"),c=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("form",{on:{submit:function(s){return s.stopPropagation(),s.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"userSetting"},[e._m(0),a("div",{staticClass:"input"},[a("div",{staticClass:"account"},[a("label",{staticClass:"inp",attrs:{for:"account"}},[a("span",{staticClass:"label"},[e._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],attrs:{id:"account",name:"account",type:"text",placeholder:""},domProps:{value:e.user.account},on:{input:function(s){s.target.composing||e.$set(e.user,"account",s.target.value)}}})])]),a("div",{staticClass:"name"},[a("label",{staticClass:"inp",attrs:{for:"name"}},[a("span",{staticClass:"label"},[e._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{id:"name",name:"name",type:"text",placeholder:""},domProps:{value:e.user.name},on:{input:function(s){s.target.composing||e.$set(e.user,"name",s.target.value)}}})])]),a("div",{staticClass:"email"},[a("label",{staticClass:"inp",attrs:{for:"email"}},[a("span",{staticClass:"label"},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{id:"email",name:"email",type:"email",placeholder:""},domProps:{value:e.user.email},on:{input:function(s){s.target.composing||e.$set(e.user,"email",s.target.value)}}})])]),a("div",{staticClass:"password"},[a("label",{staticClass:"inp",attrs:{for:"password"}},[a("span",{staticClass:"label"},[e._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",placeholder:""},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}})])]),a("div",{staticClass:"check"},[a("label",{staticClass:"inp",attrs:{for:"check-password"}},[a("span",{staticClass:"label"},[e._v("密碼確認")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkPassword,expression:"checkPassword"}],attrs:{id:"check-password",name:"checkPassword",type:"password",placeholder:""},domProps:{value:e.checkPassword},on:{input:function(s){s.target.composing||(e.checkPassword=s.target.value)}}})])]),a("div",{staticClass:"button"},[a("button",{attrs:{disabled:e.isProcessing,type:"submit"}},[e._v("儲存")])])])])])},o=[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"title"},[a("h3",[e._v("帳戶設定")])])}],u=a("1da1"),l=(a("96cf"),a("b0c0"),a("d9e2"),a("7696")),d=a("2fa3"),p={props:{initialUser:{type:Object,required:!0}},data:function(){return{user:this.initialUser,isProcessing:!1,password:"",checkPassword:""}},methods:{handleSubmit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var a,t;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,e.isProcessing=!0,e.user.account){s.next=8;break}return d["a"].fire({icon:"error",title:"請填寫帳號"}),e.isProcessing=!1,s.abrupt("return");case 8:if(e.user.name){s.next=14;break}return d["a"].fire({icon:"error",title:"請填寫姓名"}),e.isProcessing=!1,s.abrupt("return");case 14:if(e.user.email){s.next=20;break}return d["a"].fire({icon:"error",title:"請填寫信箱"}),e.isProcessing=!1,s.abrupt("return");case 20:if(e.password){s.next=26;break}return d["a"].fire({icon:"error",title:"請填寫密碼"}),e.isProcessing=!1,s.abrupt("return");case 26:if(e.checkPassword){s.next=32;break}return d["a"].fire({icon:"error",title:"請填寫第二次密碼"}),e.isProcessing=!1,s.abrupt("return");case 32:if(!(e.user.account.length>50)){s.next=38;break}return d["a"].fire({icon:"error",title:"名稱請勿超過50個字"}),e.isProcessing=!1,s.abrupt("return");case 38:if(e.password===e.checkPassword){s.next=42;break}return d["a"].fire({icon:"error",title:"請輸入相同的密碼"}),e.isProcessing=!1,s.abrupt("return");case 42:return s.next=44,l["a"].editAccount({userId:e.user.id,account:e.user.account,name:e.user.name,email:e.user.email,password:e.password,checkPassword:e.checkPassword});case 44:if(a=s.sent,t=a.data,"success"===t.status){s.next=48;break}throw new Error(t.message);case 48:d["a"].fire({icon:"success",title:"成功更改帳戶設定"}),e.isProcessing=!1,e.$store.commit("setCurrentUser",e.user),s.next=57;break;case 53:s.prev=53,s.t0=s["catch"](0),e.isProcessing=!1,console.log(s.t0);case 57:case"end":return s.stop()}}),s,null,[[0,53]])})))()}}},m=p,v=(a("202c"),a("2877")),f=Object(v["a"])(m,c,o,!1,null,"08a6123c",null),w=f.exports,b=a("4287"),g=a("2f62"),h={components:{NavBar:i["a"],UserSetting:w,TweetModal:b["a"]},computed:Object(n["a"])({},Object(g["b"])(["currentUser"]))},P=h,k=(a("3d5f"),Object(v["a"])(P,t,r,!1,null,"a76e199e",null));s["default"]=k.exports},7696:function(e,s,a){"use strict";a("b0c0");var t=a("2fa3");s["a"]={signIn:function(e){var s=e.account,a=e.password;return t["b"].post("/users/signin",{account:s,password:a})},adminSignIn:function(e){var s=e.account,a=e.password;return t["b"].post("/admin/signin",{account:s,password:a})},signUp:function(e){var s=e.account,a=e.name,r=e.email,n=e.password,i=e.checkPassword;return t["b"].post("users",{account:s,name:a,email:r,password:n,checkPassword:i})},editAccount:function(e){var s=e.userId,a=e.account,r=e.name,n=e.email,i=e.password,c=e.checkPassword;return t["b"].put("/users/".concat(s,"/account"),{account:a,name:r,email:n,password:i,checkPassword:c})}}},bee2:function(e,s,a){},c25e:function(e,s,a){}}]);
//# sourceMappingURL=chunk-a5098232.4a7d6410.js.map